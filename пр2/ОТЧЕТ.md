# Отчёт по практической работе №2

## Тема
Реализация MVC-архитектуры и CRUD-операций в Spring Boot приложении.

## Цель
Отработать реализацию MVC-архитектуры и CRUD-операций в Spring Boot приложении для создания полнофункционального веб-приложения с управлением сущностями.

## Задание
1. Реализовать архитектуру MVC
2. Создать 2 сущности с CRUD-операциями
3. Добавить валидацию полей при помощи аннотаций
4. Реализовать фильтрацию и сортировку по нескольким параметрам
5. Добавить множественное удаление (логическое и физическое)

---

## Выполнение

### Архитектура MVC

```
MODEL (Модель):
├── model/          → Сущности (Product, Category)
├── repository/     → Репозитории для работы с БД
└── service/        → Бизнес-логика

VIEW (Представление):
└── templates/      → HTML-шаблоны Thymeleaf

CONTROLLER (Контроллер):
└── controller/     → Обработка HTTP-запросов
```

### Сущности

**Product (Товар):**
- id, name, description, price, quantity, category, deleted

**Category (Категория):**
- id, name, description, deleted

### Валидация полей

```java
@NotBlank(message = "Название товара обязательно")
@Size(min = 2, max = 200, message = "Название должно быть от 2 до 200 символов")
private String name;

@NotNull(message = "Цена обязательна")
@DecimalMin(value = "0.01", message = "Цена должна быть больше 0")
private BigDecimal price;

@Min(value = 0, message = "Количество не может быть отрицательным")
private Integer quantity;
```

### CRUD-операции

| Операция | HTTP-метод | URL | Описание |
|----------|------------|-----|----------|
| Create | POST | /products | Создание товара |
| Read | GET | /products | Список товаров |
| Read | GET | /products/{id} | Просмотр товара |
| Update | POST | /products/{id} | Обновление товара |
| Delete | POST | /products/{id}/soft-delete | Логическое удаление |
| Delete | POST | /products/{id}/hard-delete | Физическое удаление |

### Фильтрация и сортировка

**Фильтрация товаров:**
- По названию (поиск по подстроке)
- По категории
- По диапазону цен (от/до)

**Сортировка:**
- По названию (asc/desc)
- По цене (asc/desc)
- По количеству (asc/desc)

### Множественное удаление

**Логическое удаление (Soft Delete):**
```java
@Query("UPDATE Product p SET p.deleted = true WHERE p.id IN :ids")
void softDeleteByIds(@Param("ids") List<Long> ids);
```

**Физическое удаление (Hard Delete):**
```java
@Query("DELETE FROM Product p WHERE p.id IN :ids")
void hardDeleteByIds(@Param("ids") List<Long> ids);
```

**Восстановление из корзины:**
```java
@Query("UPDATE Product p SET p.deleted = false WHERE p.id IN :ids")
void restoreByIds(@Param("ids") List<Long> ids);
```

---

## Вывод

В ходе выполнения работы было создано веб-приложение на Spring Boot с реализацией архитектуры MVC. Созданы 2 сущности: «Товар» и «Категория» с полными CRUD-операциями.

Реализована валидация полей с использованием аннотаций `@NotBlank`, `@NotNull`, `@Size`, `@Min`, `@DecimalMin`.

Добавлена фильтрация по нескольким параметрам (название, категория, цена) и сортировка (по названию, цене, количеству).

Реализовано множественное удаление в двух режимах: логическое (с возможностью восстановления из корзины) и физическое (безвозвратное).

Использованы аннотации: `@Controller`, `@Service`, `@Repository`, `@Entity`, `@GetMapping`, `@PostMapping`, `@RequestParam`, `@PathVariable`, `@Valid`.
