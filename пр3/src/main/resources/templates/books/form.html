<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${book.id != null ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏' : '–ù–æ–≤–∞—è –∫–Ω–∏–≥–∞'}">–ö–Ω–∏–≥–∞</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <nav class="navbar">
        <a href="/" class="navbar-brand">üìö –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</a>
        <ul class="navbar-nav">
            <li><a th:href="@{/}" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li><a th:href="@{/books}" class="nav-link active">–ö–Ω–∏–≥–∏</a></li>
            <li><a th:href="@{/authors}" class="nav-link">–ê–≤—Ç–æ—Ä—ã</a></li>
            <li><a th:href="@{/publishers}" class="nav-link">–ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞</a></li>
            <li><a th:href="@{/genres}" class="nav-link">–ñ–∞–Ω—Ä—ã</a></li>
            <li><a th:href="@{/loans}" class="nav-link">–í—ã–¥–∞—á–∏</a></li>
        </ul>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1 class="page-title" th:text="${book.id != null ? '‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏' : '‚ûï –ù–æ–≤–∞—è –∫–Ω–∏–≥–∞'}"></h1>
            <a th:href="@{/books}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</a>
        </div>

        <div class="card">
            <form th:action="${book.id != null ? '/books/' + book.id : '/books'}" method="post" th:object="${book}">
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                    <input type="text" th:field="*{title}" class="form-control" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏">
                    <div th:if="${#fields.hasErrors('title')}" class="form-error" th:errors="*{title}"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">ISBN</label>
                    <input type="text" th:field="*{isbn}" class="form-control" placeholder="978-...">
                    <div th:if="${#fields.hasErrors('isbn')}" class="form-error" th:errors="*{isbn}"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">–ê–≤—Ç–æ—Ä</label>
                    <select name="authorId" class="form-control">
                        <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ—Ä–∞ --</option>
                        <option th:each="a : ${authors}" th:value="${a.id}" th:text="${a.fullName}"
                                th:selected="${book.author != null && book.author.id == a.id}"></option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">–ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ</label>
                    <select name="publisherId" class="form-control">
                        <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ --</option>
                        <option th:each="p : ${publishers}" th:value="${p.id}" th:text="${p.name}"
                                th:selected="${book.publisher != null && book.publisher.id == p.id}"></option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">–ñ–∞–Ω—Ä—ã</label>
                    <select name="genreIds" class="form-control" multiple style="height: 120px;">
                        <option th:each="g : ${genres}" th:value="${g.id}" th:text="${g.name}"
                                th:selected="${book.genres != null && book.genres.contains(g)}"></option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">–ì–æ–¥ –∏–∑–¥–∞–Ω–∏—è</label>
                    <input type="number" th:field="*{publicationYear}" class="form-control" placeholder="2024">
                    <div th:if="${#fields.hasErrors('publicationYear')}" class="form-error" th:errors="*{publicationYear}"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü</label>
                    <input type="number" th:field="*{pages}" class="form-control" placeholder="300">
                </div>

                <div class="form-group">
                    <label class="form-label">–¶–µ–Ω–∞</label>
                    <input type="number" th:field="*{price}" class="form-control" step="0.01" placeholder="500.00">
                </div>

                <div class="form-group">
                    <label class="form-label">–í—Å–µ–≥–æ –∫–æ–ø–∏–π</label>
                    <input type="number" th:field="*{totalCopies}" class="form-control" min="1" placeholder="1">
                </div>

                <div class="form-group">
                    <label class="form-label">–î–æ—Å—Ç—É–ø–Ω–æ –∫–æ–ø–∏–π</label>
                    <input type="number" th:field="*{availableCopies}" class="form-control" min="0" placeholder="1">
                </div>

                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea th:field="*{description}" class="form-control" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫–Ω–∏–≥–∏"></textarea>
                </div>

                <div class="btn-group">
                    <button type="submit" class="btn btn-success">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <a th:href="@{/books}" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>

